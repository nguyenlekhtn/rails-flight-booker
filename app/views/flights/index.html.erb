<h1>Available flights</h1>

<div class="<%= controller_name %>">
  <%= form_with url: "/flights", method: "get" do %>
    <div class="fields">
      <div class="field">
        <%= label_tag :departure_code, "Departure code" %>
        <%= select_tag :departure_code, options_for_select(@depature_codes) %>
      </div>
      <div class="field">
        <%= label_tag :arrival_code, "Arrival code" %>
        <%= select_tag :arrival_code, options_for_select(@arrival_codes) %>
      </div>
      <div class="field">
        <%= label_tag :num_tickets, "Number of passengers" %>
        <%= select_tag :num_tickets, options_for_select(@num_passengers) %>
      </div>
      <div class="field">
        <%= label_tag :date, "Date" %>
        <%= select_tag :date, options_for_select(@dates) %>
      </div>
      <%= submit_tag "Search" %>
    </div>
  
  <% end %>

  <% if @matched_flights %>
    <h2>Matched flights: <%= @matched_flights.size %></h2>
    <ul>
      <% @matched_flights.each do |flight| %>
        <li><%= "Flight from #{flight.departure_airport.code} to #{flight.arrival_airport.code} at #{flight.start_time.strftime("%A, %d %b %Y %l:%M %p")}" %></li>
      <% end %>
    </ul>
  <% end %>
</div>
